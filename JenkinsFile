pipeline {
  agent any;

  environment {

              NEXUS_VERSION = "nexus3"
              NEXUS_PROTOCOL = "http"
              NEXUS_URL = "192.168.56.2:8081"
              NEXUS_REPOSITORY = "maven-releases"
              NEXUS_CREDENTIAL_ID = "NEXUS_CRED"
              DOCKER_CREDENTIAL_ID = "Docker-Creds"
              VERSION = "1.${env.BUILD_NUMBER}"



               }

  stages {
    stage("GIT") {
      steps {
        sh 'git checkout Projet1_MF'
        sh 'git pull origin Projet1_MF'
      }
    }
    stage("MAVEN BUILD") {
      steps {
        sh 'mvn clean install -Dmaven.test.skip=true'
      }
    }
    stage("SONARQUBE") {
      steps {
       sh "mvn sonar:sonar -Dsonar.login=admin -Dsonar.password=sonar"
      }
    }
    stage("MOCKITO") {
      steps {
        sh "mvn test -Dtest=tn.esprit.spring.services.SkierServiceImpMock"
      }
    }

stage('MVN NEXUS')
        {
        steps {
        sh 'mvn  deploy -DskipTests  '
        }
        }


  }




}